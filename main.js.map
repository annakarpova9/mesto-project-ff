{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["// Функция открытия модального окна\n\nexport function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupEsc);\n}\n\n//Функция закрытия окна: при нажатии на Esc, на крестик и на оверлей\n\nexport function closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupEsc);\n}\n\nfunction closePopupEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(document.querySelector(\".popup_is-opened\"));\n  }\n}\n\nexport function closePopupOverlay(evt) {\n  if (evt.target.classList.contains(\"popup\")) {\n    closeModal(evt.target);\n  }\n}\n\nexport function closePopupCross(evt) {\n  if (evt.target.classList.contains(\"popup__close\")) {\n    closeModal(evt.target.closest(\".popup\"));\n  }\n}\n","const apiConfig = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-12\",\n  headers: {\n    authorization: \"b8df9e7d-b568-40ba-8f5a-580c29dc72c3\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction handleResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка в then: ${res.status}`);\n}\n\nexport function apiRequest(apiRequestConfig) {\n  return fetch(`${apiConfig.baseUrl}/${apiRequestConfig.url}`, {\n    method: `${apiRequestConfig.method}`,\n    headers: apiConfig.headers,\n    body: JSON.stringify(apiRequestConfig.body),\n  }).then(handleResponse);\n}\n\nexport function catchError(err) {\n  console.log(`Ошибка в catch: ${err}`);\n}\n","import { closeModal, openModal } from \"./modal.js\";\nimport { apiRequest, catchError } from \"../components/api.js\";\n\nconst cardTemplate = document.querySelector(\"#card-template\").content;\n\nexport const popupTypeDeleteCard = document.querySelector(\n  \".popup_type_delete-card\"\n);\nexport let clickedCardId = \"0\";\n\n// Функция создания карточки\n\nexport function createCard(cardConfig, ownerId) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const img = cardElement.querySelector(\".card__image\");\n  img.src = cardConfig.card.link;\n  img.alt = cardConfig.card.name;\n\n  img.addEventListener(\"click\", () =>\n    cardConfig.openModalFullImage(img, title)\n  );\n\n  const title = cardElement.querySelector(\".card__title\");\n  title.textContent = cardConfig.card.name;\n\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  if (cardConfig.card.owner._id !== ownerId) {\n    deleteButton.remove();\n  } else {\n    deleteButton.addEventListener(\"click\", () => {\n      clickedCardId = cardConfig.card._id;\n      cardElement.id = clickedCardId;\n      openModal(popupTypeDeleteCard);\n    });\n  }\n\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\n  const likeAmount = cardElement.querySelector(\".card__like-amount\");\n\n  likeAmount.textContent =\n    cardConfig.card.likes.length === 0 ? \"0\" : cardConfig.card.likes.length;\n\n  if (\n    cardConfig.card.likes.some((like) => {\n      return like._id === ownerId;\n    })\n  ) {\n    likeBtn.classList.add(\"card__like-button_is-active\");\n  }\n\n  likeBtn.addEventListener(\"click\", () =>\n    cardConfig.likeCard(cardConfig.card, likeBtn, likeAmount)\n  );\n\n  return cardElement;\n}\n\n// Функция лайка\n\nexport function likeCard(card, likeBtn, likeAmount) {\n  if (likeBtn.classList.contains(\"card__like-button_is-active\")) {\n    apiRequest({\n      url: `cards/likes/${card._id}`,\n      method: \"DELETE\",\n    })\n      .then((res) => {\n        likeBtn.classList.remove(\"card__like-button_is-active\");\n        likeAmount.textContent =\n          res.likes.length === 0 ? \"0\" : res.likes.length;\n      })\n      .catch(catchError);\n  } else {\n    apiRequest({\n      url: `cards/likes/${card._id}`,\n      method: \"PUT\",\n    })\n      .then((res) => {\n        likeBtn.classList.add(\"card__like-button_is-active\");\n        likeAmount.textContent =\n          res.likes.length === 0 ? \"0\" : res.likes.length;\n      })\n      .catch(catchError);\n  }\n}\n","export const validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__input-error_active\",\n};\n\n// Функции для показа и скрытия ошибок\n\nfunction showInputError(\n  formElement,\n  inputElement,\n  errorMessage,\n  validationConfig\n) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(validationConfig.inputErrorClass);\n\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(validationConfig.errorClass);\n}\n\nfunction hideInputError(formElement, inputElement) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  inputElement.setCustomValidity(\"\");\n\n  errorElement.classList.remove(validationConfig.errorClass);\n  errorElement.textContent = \" \";\n}\n\n// Проверка валидности формы для показа/скрытия ошибки и выбора вида ошибки\n\nfunction checkInputValidity(formElement, inputElement, validationConfig) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      validationConfig\n    );\n  } else {\n    hideInputError(formElement, inputElement, validationConfig);\n  }\n}\n\n// Функции слушателя всех инпутов и всех форм\n\nfunction setEventListeners(formElement, validationConfig) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, validationConfig);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n}\n\nexport function enableValidation(validationConfig) {\n  const formList = Array.from(\n    document.querySelectorAll(validationConfig.formSelector)\n  );\n\n  formList.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", (evt) => evt.preventDefault());\n    setEventListeners(formElement, validationConfig);\n  });\n}\n\n// Фунцкции проверки одновременной валидности инпутов и состояния кнопки\n\nfunction hasInvalidInput(inputList) {\n  return inputList.some((inputElement) => !inputElement.validity.valid);\n}\n\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\n  }\n}\n\n// Функция очистки ошибок\n\nexport function clearValidation(formElement, validationConfig) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  inputList.forEach((inputElement) =>\n    hideInputError(formElement, inputElement, validationConfig)\n  );\n  toggleButtonState(inputList, buttonElement, validationConfig);\n}\n","import \"../pages/index.css\";\nimport {\n  createCard,\n  likeCard,\n  popupTypeDeleteCard,\n  clickedCardId,\n} from \"../components/card.js\";\nimport {\n  openModal,\n  closeModal,\n  closePopupOverlay,\n  closePopupCross,\n} from \"../components/modal.js\";\nimport {\n  validationConfig,\n  enableValidation,\n  clearValidation,\n} from \"../components/validation.js\";\nimport { apiRequest, catchError } from \"../components/api.js\";\n\nconst cardsContainer = document.querySelector(\".places__list\");\n\nconst popups = document.querySelectorAll(\".popup\");\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\nconst popupTypeNewCard = document.querySelector(\".popup_type_new-card\");\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\n\nconst openPopupEditBtn = document.querySelector(\".profile__edit-button\");\nconst openPopupAddBtn = document.querySelector(\".profile__add-button\");\n\nconst formEditProfile = document.forms[\"edit-profile\"];\nconst nameProfileInput = formEditProfile.elements.name;\nconst jobProfileInput = formEditProfile.elements.description;\n\nconst formAddNewCard = document.forms[\"new-place\"];\nconst nameCardInput = formAddNewCard.elements[\"place-name\"];\nconst linkCardInput = formAddNewCard.elements.link;\n\nconst formDeleteCard = document.forms[\"delete-card\"];\n\nconst formNewAvatar = document.forms.avatar;\nconst avatarLinkInput = formNewAvatar.elements[\"avatar-link\"];\n\nconst profileInfo = document.querySelector(\".profile__info\");\nconst profileImage = document.querySelector(\".profile__image\");\nconst profileTitle = profileInfo.querySelector(\".profile__title\");\nconst profileDescription = profileInfo.querySelector(\".profile__description\");\n\nconst fullOpenImage = popupTypeImage.querySelector(\".popup__image\");\nconst captionFullOpenImage = popupTypeImage.querySelector(\".popup__caption\");\n\n//\n\nenableValidation(validationConfig);\n\n// Получение от сервера карточек и пользователя\n\nPromise.all([\n  apiRequest({\n    url: \"cards\",\n    method: \"GET\",\n  }).then((res) => requestCards(res)),\n\n  apiRequest({\n    url: \"users/me\",\n    method: \"GET\",\n  }).then((res) => requestProfile(res)),\n]).catch(catchError);\n\n// Вывод информации профиля\n\nfunction requestProfile(res) {\n  profileInfo.dataset.userId = res._id;\n  profileImage.style.backgroundImage = `url(${res.avatar})`;\n  profileTitle.textContent = res.name;\n  profileDescription.textContent = res.about;\n}\n\n// Вывод карточек на страницу\n\nfunction requestCards(res) {\n  res.forEach((card) => {\n    cardsContainer.append(\n      createCard(\n        {\n          card: card,\n          likeCard,\n          openModalFullImage,\n        },\n        profileInfo.dataset.userId\n      )\n    );\n  });\n}\n\n// Функция для открытия модального окна с изображением\n\nfunction openModalFullImage(img, title) {\n  fullOpenImage.src = img.src;\n  fullOpenImage.alt = img.alt;\n  captionFullOpenImage.textContent = title.textContent;\n  openModal(popupTypeImage);\n}\n\n// Добавление класса для плавной анимации всем модальным окнам\n\npopups.forEach((item) => item.classList.add(\"popup_is-animated\"));\n\n// Закрытие модальных окон по нажатию на крестик и оверлей\n\npopups.forEach((item) => item.addEventListener(\"mousedown\", closePopupOverlay));\npopups.forEach((item) => item.addEventListener(\"click\", closePopupCross));\n\n// Обработка клика по кнопкам редактирования профиля, добавления новой карточки и аватара\n\nopenPopupEditBtn.addEventListener(\"click\", () => {\n  openModal(popupTypeEdit);\n  fillFormEditProfile();\n  clearValidation(formEditProfile, validationConfig);\n});\n\nopenPopupAddBtn.addEventListener(\"click\", () => {\n  formAddNewCard.reset();\n  openModal(popupTypeNewCard);\n  clearValidation(formAddNewCard, validationConfig);\n});\n\nprofileImage.addEventListener(\"click\", () => {\n  formNewAvatar.reset();\n  openModal(popupTypeAvatar);\n  clearValidation(popupTypeAvatar, validationConfig);\n});\n\n// Обработка события sumbit для модального окна редактирования профиля\n\nfunction handleFormEditSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, evt);\n\n  apiRequest({\n    url: \"users/me\",\n    method: \"PATCH\",\n    body: {\n      name: nameProfileInput.value,\n      about: jobProfileInput.value,\n    },\n  })\n    .then((res) => requestProfile(res))\n    .catch(catchError)\n    .finally(() => renderLoading(false, evt));\n  closeModal(popupTypeEdit);\n}\n\nformEditProfile.addEventListener(\"submit\", handleFormEditSubmit);\n\nfunction fillFormEditProfile() {\n  nameProfileInput.value = profileTitle.textContent;\n  jobProfileInput.value = profileDescription.textContent;\n}\n\n// Добавление новой карточки\n\nfunction handleFormNewCardSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, evt);\n\n  apiRequest({\n    url: \"cards\",\n    method: \"POST\",\n    body: {\n      name: nameCardInput.value,\n      link: linkCardInput.value,\n    },\n  })\n    .then((card) =>\n      cardsContainer.append(\n        createCard(\n          {\n            card: card,\n            likeCard,\n            openModalFullImage,\n          },\n          profileInfo.dataset.userId\n        )\n      )\n    )\n    .catch(catchError)\n    .finally(() => renderLoading(false, evt));\n\n  formAddNewCard.reset();\n  closeModal(popupTypeNewCard);\n}\n\nformAddNewCard.addEventListener(\"submit\", handleFormNewCardSubmit);\n\n// Обновление аватара на сервере\n\nfunction handleAvatarSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, evt);\n\n  apiRequest({\n    url: \"users/me/avatar\",\n    method: \"PATCH\",\n    body: {\n      avatar: avatarLinkInput.value,\n    },\n  })\n    .then((res) => requestProfile(res))\n    .catch(catchError)\n    .finally(() => renderLoading(false, evt));\n\n  closeModal(popupTypeAvatar);\n}\n\nformNewAvatar.addEventListener(\"submit\", handleAvatarSubmit);\n\n// Функция загрузки при ожидании ответа от сервера\n\nfunction renderLoading(\n  isLoading,\n  evt,\n  btnInitialText = \"Сохранить\",\n  btnloadingText = \"Сохранение...\"\n) {\n  const btn = evt.submitter;\n  if (isLoading) {\n    btn.textContent = btnloadingText;\n  } else {\n    btn.textContent = btnInitialText;\n  }\n}\n\n// Удаление карточки при согласии\n\nfunction handleDeleteCardSubmit(\n  evt,\n  btnInitialText = \"Да\",\n  btnloadingText = \"Удаление...\"\n) {\n  evt.preventDefault();\n\n  renderLoading(true, evt, btnInitialText, btnloadingText);\n\n  apiRequest({\n    url: `cards/${clickedCardId}`,\n    method: \"DELETE\",\n  })\n    .then((card) => {\n      card = document.getElementById(clickedCardId);\n      card.remove;\n    })\n    .catch(catchError)\n    .finally(() => renderLoading(false, evt, btnInitialText));\n  closeModal(popupTypeDeleteCard);\n}\n\nformDeleteCard.addEventListener(\"submit\", handleDeleteCardSubmit);\n"],"names":["openModal","popup","classList","add","document","addEventListener","closePopupEsc","closeModal","remove","removeEventListener","evt","key","querySelector","closePopupOverlay","target","contains","closePopupCross","closest","apiConfig","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","apiRequest","apiRequestConfig","fetch","url","method","body","JSON","stringify","then","catchError","err","console","log","cardTemplate","content","popupTypeDeleteCard","clickedCardId","createCard","cardConfig","ownerId","cardElement","cloneNode","img","src","card","link","alt","name","openModalFullImage","title","textContent","deleteButton","owner","_id","id","likeBtn","likeAmount","likes","length","some","like","likeCard","catch","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","setCustomValidity","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","clearValidation","Array","from","querySelectorAll","forEach","cardsContainer","popups","popupTypeEdit","popupTypeNewCard","popupTypeImage","popupTypeAvatar","openPopupEditBtn","openPopupAddBtn","formEditProfile","forms","nameProfileInput","elements","jobProfileInput","description","formAddNewCard","nameCardInput","linkCardInput","formDeleteCard","formNewAvatar","avatar","avatarLinkInput","profileInfo","profileImage","profileTitle","profileDescription","fullOpenImage","captionFullOpenImage","requestProfile","dataset","userId","style","backgroundImage","about","renderLoading","isLoading","btnInitialText","arguments","undefined","btnloadingText","submitter","preventDefault","patternMismatch","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","all","append","requestCards","item","value","reset","finally","getElementById"],"sourceRoot":""}