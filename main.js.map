{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const apiConfig = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-12\",\n  headers: {\n    authorization: \"b8df9e7d-b568-40ba-8f5a-580c29dc72c3\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction handleResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка в then: ${res.status}`);\n}\n\nexport function apiRequest(apiRequestConfig) {\n  return fetch(`${apiConfig.baseUrl}/${apiRequestConfig.url}`, {\n    method: `${apiRequestConfig.method}`,\n    headers: apiConfig.headers,\n    body: JSON.stringify(apiRequestConfig.body),\n  }).then(handleResponse);\n}\n\nexport function catchError(err) {\n  console.log(`Ошибка в catch: ${err}`);\n}\n","import { apiRequest, catchError } from \"../components/api.js\";\n\nconst cardTemplate = document.querySelector(\"#card-template\").content;\n\n// Функция создания карточки\n\nexport function createCard(cardConfig, ownerId) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const img = cardElement.querySelector(\".card__image\");\n  img.src = cardConfig.card.link;\n  img.alt = cardConfig.card.name;\n\n  img.addEventListener(\"click\", () => {\n    cardConfig.openModalFullImage(img, title);\n  });\n\n  const title = cardElement.querySelector(\".card__title\");\n  title.textContent = cardConfig.card.name;\n\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  if (cardConfig.card.owner._id !== ownerId) {\n    deleteButton.remove();\n  } else {\n    cardConfig.clickButtonDeleteCard(\n      deleteButton,\n      cardConfig.card,\n      cardElement\n    );\n  }\n\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\n  const likeAmount = cardElement.querySelector(\".card__like-amount\");\n\n  likeAmount.textContent =\n    cardConfig.card.likes.length === 0 ? \"0\" : cardConfig.card.likes.length;\n\n  if (\n    cardConfig.card.likes.some((like) => {\n      return like._id === ownerId;\n    })\n  ) {\n    likeBtn.classList.add(\"card__like-button_is-active\");\n  }\n\n  likeBtn.addEventListener(\"click\", () =>\n    cardConfig.likeCard(cardConfig.card, likeBtn, likeAmount)\n  );\n\n  return cardElement;\n}\n\n// Функция лайка\n\nexport function likeCard(card, likeBtn, likeAmount) {\n  if (likeBtn.classList.contains(\"card__like-button_is-active\")) {\n    apiRequest({\n      url: `cards/likes/${card._id}`,\n      method: \"DELETE\",\n    })\n      .then((res) => {\n        likeBtn.classList.remove(\"card__like-button_is-active\");\n        likeAmount.textContent =\n          res.likes.length === 0 ? \"0\" : res.likes.length;\n      })\n      .catch(catchError);\n  } else {\n    apiRequest({\n      url: `cards/likes/${card._id}`,\n      method: \"PUT\",\n    })\n      .then((res) => {\n        likeBtn.classList.add(\"card__like-button_is-active\");\n        likeAmount.textContent =\n          res.likes.length === 0 ? \"0\" : res.likes.length;\n      })\n      .catch(catchError);\n  }\n}\n","// Функция открытия модального окна\n\nexport function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupEsc);\n}\n\n//Функция закрытия окна: при нажатии на Esc, на крестик и на оверлей\n\nexport function closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupEsc);\n}\n\nfunction closePopupEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(document.querySelector(\".popup_is-opened\"));\n  }\n}\n\nexport function closePopupOverlay(evt) {\n  if (evt.target.classList.contains(\"popup\")) {\n    closeModal(evt.target);\n  }\n}\n\nexport function closePopupCross(evt) {\n  if (evt.target.classList.contains(\"popup__close\")) {\n    closeModal(evt.target.closest(\".popup\"));\n  }\n}\n","export const validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__input-error_active\",\n};\n\n// Функции для показа и скрытия ошибок\n\nexport function showInputError(\n  formElement,\n  inputElement,\n  errorMessage,\n  validationConfig\n) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(validationConfig.inputErrorClass);\n\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(validationConfig.errorClass);\n}\n\nexport function hideInputError(formElement, inputElement) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  inputElement.setCustomValidity(\"\");\n\n  errorElement.classList.remove(validationConfig.errorClass);\n  errorElement.textContent = \" \";\n}\n\n// Проверка валидности формы для показа/скрытия ошибки и выбора вида ошибки\n\nfunction checkInputValidity(formElement, inputElement, validationConfig) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      validationConfig\n    );\n  } else {\n    hideInputError(formElement, inputElement, validationConfig);\n  }\n}\n\n// Функции слушателя всех инпутов и всех форм\n\nfunction setEventListeners(formElement, validationConfig) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, validationConfig);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n}\n\nexport function enableValidation(validationConfig) {\n  const formList = Array.from(\n    document.querySelectorAll(validationConfig.formSelector)\n  );\n\n  formList.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", (evt) => evt.preventDefault());\n    setEventListeners(formElement, validationConfig);\n  });\n}\n\n// Фунцкции проверки одновременной валидности инпутов и состояния кнопки\n\nfunction hasInvalidInput(inputList) {\n  return inputList.some((inputElement) => !inputElement.validity.valid);\n}\n\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\n  }\n}\n\n// Функция очистки ошибок\n\nexport function clearValidation(formElement, validationConfig) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  inputList.forEach((inputElement) =>\n    hideInputError(formElement, inputElement, validationConfig)\n  );\n  toggleButtonState(inputList, buttonElement, validationConfig);\n}\n","import \"../pages/index.css\";\nimport { createCard, likeCard } from \"../components/card.js\";\nimport {\n  openModal,\n  closeModal,\n  closePopupOverlay,\n  closePopupCross,\n} from \"../components/modal.js\";\nimport {\n  validationConfig,\n  showInputError,\n  hideInputError,\n  enableValidation,\n  clearValidation,\n} from \"../components/validation.js\";\nimport { apiRequest, catchError } from \"../components/api.js\";\n\nconst containerCards = document.querySelector(\".places__list\");\n\nconst popups = document.querySelectorAll(\".popup\");\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\nconst popupTypeNewCard = document.querySelector(\".popup_type_new-card\");\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\nconst popupTypeDeleteCard = document.querySelector(\".popup_type_delete-card\");\n\nconst buttonOpenPopupProfile = document.querySelector(\".profile__edit-button\");\nconst buttonOpenPopupAddCard = document.querySelector(\".profile__add-button\");\n\nconst formEditProfile = document.forms[\"edit-profile\"];\nconst inputNameProfile = formEditProfile.elements.name;\nconst inputDescriptionProfile = formEditProfile.elements.description;\n\nconst formAddNewCard = document.forms[\"new-place\"];\nconst inputNameCard = formAddNewCard.elements[\"place-name\"];\nconst inputLinkCard = formAddNewCard.elements.link;\n\nconst formDeleteCard = document.forms[\"delete-card\"];\n\nconst formNewAvatar = document.forms.avatar;\nconst inputLinkAvatar = formNewAvatar.elements[\"avatar-link\"];\n\nconst profileInfo = document.querySelector(\".profile__info\");\nconst profileImage = document.querySelector(\".profile__image\");\nconst profileTitle = profileInfo.querySelector(\".profile__title\");\nconst profileDescription = profileInfo.querySelector(\".profile__description\");\n\nconst buttonOpenFullImage = popupTypeImage.querySelector(\".popup__image\");\nconst captionFullImage = popupTypeImage.querySelector(\".popup__caption\");\n\nlet idClickedCard = \"0\";\n\n//\n\nenableValidation(validationConfig);\n\n// Получение от сервера карточек и пользователя\n\nPromise.all([\n  apiRequest({\n    url: \"cards\",\n    method: \"GET\",\n  }),\n\n  apiRequest({\n    url: \"users/me\",\n    method: \"GET\",\n  }),\n])\n  .then(([infoCards, infoProfile]) => {\n    setDataProfile(infoProfile);\n    setDataCards(infoCards, infoProfile._id);\n  })\n  .catch(catchError);\n\n// Вывод информации профиля\n\nfunction setDataProfile(res) {\n  profileInfo.dataset.userId = res._id;\n  profileImage.style.backgroundImage = `url(${res.avatar})`;\n  profileTitle.textContent = res.name;\n  profileDescription.textContent = res.about;\n}\n\n// Вывод карточек на страницу\n\nfunction setDataCards(res, ownerId) {\n  res.forEach((card) => {\n    containerCards.append(\n      createCard(\n        {\n          card: card,\n          likeCard,\n          openModalFullImage,\n          clickButtonDeleteCard,\n        },\n        ownerId\n      )\n    );\n  });\n}\n\n// Функция для открытия модального окна с изображением\n\nfunction openModalFullImage(img, title) {\n  buttonOpenFullImage.src = img.src;\n  buttonOpenFullImage.alt = img.alt;\n  captionFullImage.textContent = title.textContent;\n  openModal(popupTypeImage);\n}\n\n// Добавление класса для плавной анимации всем модальным окнам\n\npopups.forEach((item) => item.classList.add(\"popup_is-animated\"));\n\n// Закрытие модальных окон по нажатию на крестик и оверлей\n\npopups.forEach((item) => item.addEventListener(\"mousedown\", closePopupOverlay));\npopups.forEach((item) => item.addEventListener(\"click\", closePopupCross));\n\n// Обработка клика по кнопкам редактирования профиля, добавления новой карточки и аватара\n\nbuttonOpenPopupProfile.addEventListener(\"click\", () => {\n  openModal(popupTypeEdit);\n  fillFormEditProfile();\n  clearValidation(formEditProfile, validationConfig);\n});\n\nbuttonOpenPopupAddCard.addEventListener(\"click\", () => {\n  formAddNewCard.reset();\n  openModal(popupTypeNewCard);\n  clearValidation(formAddNewCard, validationConfig);\n});\n\nprofileImage.addEventListener(\"click\", () => {\n  formNewAvatar.reset();\n  openModal(popupTypeAvatar);\n  clearValidation(popupTypeAvatar, validationConfig);\n});\n\n// Обработка события sumbit для модального окна редактирования профиля\n\nfunction handleFormEditSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(evt, \"Сохранение...\");\n\n  apiRequest({\n    url: \"users/me\",\n    method: \"PATCH\",\n    body: {\n      name: inputNameProfile.value,\n      about: inputDescriptionProfile.value,\n    },\n  })\n    .then((res) => {\n      setDataProfile(res);\n      closeModal(popupTypeEdit);\n    })\n    .catch((err) => {\n      showInputError(\n        formEditProfile,\n        inputDescriptionProfile,\n        `Ошибка сервера: ${err}`,\n        validationConfig\n      );\n    })\n    .finally(() => renderLoading(evt));\n}\n\nformEditProfile.addEventListener(\"submit\", handleFormEditSubmit);\n\nfunction fillFormEditProfile() {\n  inputNameProfile.value = profileTitle.textContent;\n  inputDescriptionProfile.value = profileDescription.textContent;\n}\n\n// Добавление новой карточки\n\nfunction handleFormNewCardSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(evt, \"Сохранение...\");\n\n  apiRequest({\n    url: \"cards\",\n    method: \"POST\",\n    body: {\n      name: inputNameCard.value,\n      link: inputLinkCard.value,\n    },\n  })\n    .then((card) => {\n      containerCards.prepend(\n        createCard(\n          {\n            card: card,\n            likeCard,\n            openModalFullImage,\n            clickButtonDeleteCard,\n          },\n          profileInfo.dataset.userId\n        )\n      );\n      formAddNewCard.reset();\n      closeModal(popupTypeNewCard);\n    })\n    .catch((err) => {\n      showInputError(\n        formAddNewCard,\n        inputLinkCard,\n        `Ошибка сервера: ${err}`,\n        validationConfig\n      );\n    })\n    .finally(() => renderLoading(evt));\n}\n\nformAddNewCard.addEventListener(\"submit\", handleFormNewCardSubmit);\n\n// Обновление аватара на сервере\n\nfunction handleAvatarSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(evt, \"Сохранение...\");\n\n  apiRequest({\n    url: \"users/me/avatar\",\n    method: \"PATCH\",\n    body: {\n      avatar: inputLinkAvatar.value,\n    },\n  })\n    .then((res) => {\n      setDataProfile(res);\n      closeModal(popupTypeAvatar);\n    })\n    .catch((err) => {\n      showInputError(\n        formNewAvatar,\n        inputLinkAvatar,\n        `Ошибка сервера: ${err}`,\n        validationConfig\n      );\n    })\n    .finally(() => renderLoading(evt));\n}\n\nformNewAvatar.addEventListener(\"submit\", handleAvatarSubmit);\n\n// Функция загрузки при ожидании ответа от сервера\n\nfunction renderLoading(evt, buttonText = \"Сохранить\") {\n  const button = evt.submitter;\n  button.textContent = buttonText;\n}\n\n// Обработчика нажатия на кнопку удаления\n\nfunction clickButtonDeleteCard(deleteButton, card, cardElement) {\n  deleteButton.addEventListener(\"click\", () => {\n    idClickedCard = card._id;\n    cardElement.id = idClickedCard;\n    openModal(popupTypeDeleteCard);\n  });\n}\n\n// Удаление карточки при согласии\n\nfunction handleDeleteCardSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(evt, \"Удаление...\");\n\n  apiRequest({\n    url: `cards/${idClickedCard}`,\n    method: \"DELETE\",\n  })\n    .then((card) => {\n      card = document.getElementById(idClickedCard);\n      card.remove();\n      closeModal(popupTypeDeleteCard);\n    })\n    .catch((err) => {\n      const errorMessage = document.querySelector(\".delete-card-error\");\n      errorMessage.textContent = `Ошибка сервера: ${err}`;\n      errorMessage.classList.add(validationConfig.errorClass);\n    })\n    .finally(() => renderLoading(evt, \"Да\"));\n}\n\nformDeleteCard.addEventListener(\"submit\", handleDeleteCardSubmit);\n"],"names":["apiConfig","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","apiRequest","apiRequestConfig","fetch","url","method","body","JSON","stringify","then","catchError","err","console","log","cardTemplate","document","querySelector","content","createCard","cardConfig","ownerId","cardElement","cloneNode","img","src","card","link","alt","name","addEventListener","openModalFullImage","title","textContent","deleteButton","owner","_id","remove","clickButtonDeleteCard","likeBtn","likeAmount","likes","length","some","like","classList","add","likeCard","contains","catch","openModal","popup","closePopupEsc","closeModal","removeEventListener","evt","key","closePopupOverlay","target","closePopupCross","closest","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","showInputError","formElement","inputElement","errorMessage","errorElement","id","hideInputError","setCustomValidity","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","clearValidation","Array","from","querySelectorAll","forEach","containerCards","popups","popupTypeEdit","popupTypeNewCard","popupTypeImage","popupTypeAvatar","popupTypeDeleteCard","buttonOpenPopupProfile","buttonOpenPopupAddCard","formEditProfile","forms","inputNameProfile","elements","inputDescriptionProfile","description","formAddNewCard","inputNameCard","inputLinkCard","formDeleteCard","formNewAvatar","avatar","inputLinkAvatar","profileInfo","profileImage","profileTitle","profileDescription","buttonOpenFullImage","captionFullImage","idClickedCard","setDataProfile","dataset","userId","style","backgroundImage","about","renderLoading","buttonText","arguments","undefined","submitter","preventDefault","patternMismatch","validationMessage","checkInputValidity","setEventListeners","enableValidation","all","_ref","_ref2","infoCards","infoProfile","append","item","value","reset","finally","prepend","getElementById"],"sourceRoot":""}